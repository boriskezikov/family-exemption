# family-exemption
Приложение отвечает за храниние и работу со льготами, категориями льготников, льготными критериями. Внутри лежит  

Чтобы поднять сервис нужно:
- Запустить бд Postgres на порту 5432, либо изменить настройки подключения в application.yaml
- Запустить `mvn clean install` 
- Запустить полученный jar c предворительно проставленным флагом для JVM `--enable-preview`

Чтобы запустить миграции базы данных нужно:
- Обновить настройки подключения flyway к бд в pom.xml.
- Запустить `mvn flyway:migrate`

Свагер прикрутить не успели, вот краткое описание API:

- **POST `exemption/`** \
Принимает на вход мапу с критериями и идентификатор пользователя. 
Если идентификатор не принадлежит анонимному пользователю, то сохраняем запрос и результат как пользовательские данные.
- **GET `exemption/`**\
Получаем список всех возможных льгот.
- **GET _exemption/{id}_**\
Получить информацию по конкретной льготе
- **GET `user/{id}`**\
Получить информацию по пользователю. Защита пользовательских данных планируется через auth 2.0, сейчас данный сервис jwt токены не поддерживает.
- **GET `document/{id}`**\
Каждая льгота связана с каким-либо постановительным актом. В этом методе можно получить документы по id.

https://family-exemption.herokuapp.com/ - один из инстансов сервиса крутится на нашем сервере heroku.
